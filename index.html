<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="mmfavicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Barlow:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">

    <title>Joe's Micro Macro Buddy</title>

    <style>
    /* General Body Styles */
    body {
        margin: 0;
        padding: 0;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        font-family: 'Barlow', sans-serif;
        font-size: 16px;
        font-weight: 400;
        color: rgb(29, 29, 27);
        line-height: 20px;
        text-align: left;
    }
    
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 150vw;
        height: 150vh;
        background: url('mmbg.jpg') no-repeat top center;
        background-size: cover;
        transform: translateX(-25vw);
        z-index: -1;
        pointer-events: none;
    }
    
    /* Typography */
    select, input, button, label {
        font-family: 'Barlow', sans-serif;
        font-size: 16px;
        font-weight: 400;
        color: rgb(29, 29, 27);
        line-height: 20px;
        text-align: left;
        box-sizing: border-box;
    }
    
    label {
        font-size: 14px;
        margin-bottom: 3px;
        display: block;
    }
    
    h1, h2 {
        font-family: 'Bangers', sans-serif;
        font-weight: 500;
        color: white;
        text-shadow: 2px 2px 0px rgb(0, 0, 0);
        -webkit-text-stroke-width: 2px;
        -webkit-text-stroke-color: rgb(0, 0, 0);
        margin: 0;
    }
    
    h1 {
        font-size: 8vw;
        text-align: center;
        margin-bottom: 15px;
        line-height: 1.1;
        word-break: break-word;
    }
    
    h2 {
        font-size: 6vw;
        text-align: left;
        letter-spacing: 2.5px;
        margin-bottom: 7px; 
        margin-top: 30px; 
        line-height: 1.1;
        -webkit-text-stroke-width: 1px;
    }
    
    /* Container Styling */
    .container {
        width: 90%;
        max-width: 90%;
        padding: 20px;
        background: rgba(255, 255, 255, 0.95);
        border: none;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin: 15px auto 0;
        box-sizing: border-box;
    }
    
    /* Question Styling */
    .question-wrapper {
        font-family: 'Barlow', sans-serif;
        font-size: 18px;
        margin-bottom: 5px;
    }
    
    /* Selection Wrapper Styles */
    .selection-wrapper {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .selection-wrapper > div {
        width: 100%;
    }
    
    .selection-wrapper select {
        width: 100%;
        padding: 5px;
        font-size: 14px;
        font-weight: 400;
        color: rgb(29, 29, 27);
        border: 2px solid #000;
        border-radius: 5px;
        background-color: #fff;
        appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg fill="black" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
        background-repeat: no-repeat;
        background-position: right 8px center;
    }
    
    /* Coordinate Input Styles */
    .coordinate-input-wrapper input {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        font-weight: 400;
        color: rgb(29, 29, 27);
        border: 2px solid #000;
        border-radius: 5px;
        box-sizing: border-box;
    }
    
    /* Button Styles */
    button {
        background-color: #d31f26;
        color: white;
        padding: 16px;
        cursor: pointer;
        border: none;
        font-size: 16px;
        font-weight: bold;
        border-radius: 10px;
        transition: background-color 0.3s ease;
        margin-top: 20px;
        display: block;
        width: 100%;
        text-align: center;
    }
    
    button:hover {
        background-color: #000;
    }
    
    #next-question-btn {
        background-color: #000;
        display: none;
    }
    
    #next-question-btn:hover {
        background-color: #444;
    }
    
    /* Subtle Option Link */
    .subtle-options-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }
    
    .subtle-option {
        font-size: 14px;
        color: #555;
        text-align: center;
        cursor: pointer;
        transition: color 0.3s ease;
    }
    
    .subtle-option:hover {
        color: #000;
        text-decoration: underline;
    }
    
    /* Result Styles */
    #result {
        margin: 20px 0;
        font-size: 18px;
        font-weight: bold;
        text-align: center;
        font-family: 'Barlow', sans-serif;
        color: rgb(29, 29, 27);
    }
    
    #completion-message {
        font-family: 'Bangers', sans-serif;
        font-weight: 500;
        color: white;
        text-shadow: 2px 2px 0px rgb(0, 0, 0);
        -webkit-text-stroke-width: 2px;
        -webkit-text-stroke-color: rgb(0, 0, 0);
        margin: 0;
        font-size: 35px;
        text-align: center;
        letter-spacing: 2.5px;
        margin-bottom: 7px; 
        margin-top: 45px; 
        line-height: 1.2em;
    }
    
    .helper-text {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
    }
    
    /* Bottom Bar Styles */
    .bottom-bar {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: black;
        color: white;
        padding: 10px 20px;
        box-sizing: border-box;
        z-index: 100;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .bottom-bar-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1200px;
        text-align: center;
    }
    
    .help-link a,
    .buy-link a,
    .game-link {
        color: white;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        font-size: 14px;
    }
    
    body .help-link a:hover, 
    body .buy-link a:hover,
    body .game-link:hover {
        color: #d31f26 !important;
    }
    
    .help-link a:visited,
    .buy-link a:visited,
    .game-link:visited,
    .help-link a:active,
    .buy-link a:active,
    .game-link:active {
        color: white;
    }
    
    .help-link a::before {
        content: '?';
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 1px solid white;
        color: white;
        font-weight: bold;
        font-size: 12px;
        margin-right: 5px;
        background-color: transparent;
    }
    
    .help-link a:hover::before {
        color: #d31f26;
        border-color: #d31f26;
    }
    
    /* Disclaimer Styling */
    .disclaimer {
        font-size: 14px;
        flex-grow: 1;
        text-align: center;
        padding: 0 20px;
    }
    
    /* Media Queries */
    @media (max-width: 750px) {
        .container {
            padding-left: 15px;
            padding-right: 15px;
        }
    
        .bottom-bar {
            padding: 5px 10px;
        }
    
        .bottom-bar-content {
            flex-direction: column;
            gap: 5px;
        }
    
        .help-link a, .buy-link a, .game-link {
            font-size: 12px;
        }
    
        .help-link a::before {
            width: 14px;
            height: 14px;
            font-size: 10px;
        }
    
        .disclaimer {
            font-size: 12px;
            padding: 0 10px;
        }
    }
    
    @media (min-width: 768px) {
        body {
            padding: 0;
            justify-content: center;
            align-items: center;
        }
    
        .container {
            width: 70%;
            max-width: 700px;
            padding: 15px 60px 25px 60px;
            border: 5px solid #000;
            border-radius: 15px;
            margin-bottom: 30px;
        }
    
        h1 {
            font-size: 60px;
            margin-bottom: 30px;
            margin-top: 10px;
        }
    
        h2 {
            font-size: 35px;
            margin-top: 45px;
        }
    
        .selection-wrapper {
            flex-direction: row;
            justify-content: space-between;
        }
    
        .selection-wrapper > div {
            width: 48%;
        }
    
        button {
            width: 80%;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
    }
/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
}

.modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 90%;
    max-width: 700px;
    border-radius: 5px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    position: relative;
    animation: modalFadeIn 0.3s;
}

@keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}

#modal-body {
    margin-top: 20px;
}

#modal-body iframe {
    width: 100%;
    height: 515px;
    border: none;
}

@media (max-width: 768px) {
    .modal-content {
        width: 95%;
        margin: 10% auto;
    }
    
    #modal-body iframe {
        height: 400px;
    }
}


</style>    

</head>

<body>

    <div class="container">

        <h1>Joe's<br>Micro Macro Buddy</h1>
        <div class="selection-wrapper">
            <div>
                <label for="game-select">Select Game:</label>
                <select id="game-select">
                    <!-- Options will be dynamically populated by JavaScript -->
                </select>
            </div>
        
            <div>
                <label for="case-select">Select Case:</label>
                <select id="case-select">
                    <!-- Options will be dynamically populated by JavaScript -->
                </select>
            </div>
        </div>

        <h2 id="question-header">Question 1:</h2>
        <div class="question-wrapper">Where is the first clue?</div>


        <div class="coordinate-input-wrapper">
            <!-- <label for="coordinate-input">Enter Coordinate (e.g., A5):</label> -->
            <input type="text" id="coordinate-input" placeholder="Enter coordinate (e.g., A5)">
            <div id="coordinate-helper" class="helper-text"></div>
        </div>

        

        <button id="check-answer-btn">Check Answer</button>

        <div id="result"></div>

        <button id="next-question-btn">Next Question</button>

        <div class="subtle-options-container">
            <div class="subtle-option" id="previous-question" style="display: none;">Previous Question</div>
            <div class="subtle-option" id="see-answer">See Answer</div>
            <div class="subtle-option" id="skip-question">Skip Question</div>
        </div>
        

        
</div>

 
    <script>
        const answerData = {
  "All In": {
    "All In": [
      {
        "question": "What misfortunes have befallen the other three riders? (2/8)",
        "answers": [
          "L8"
        ]
      },
      {
        "question": "Which millionaire bet on which horse? (3/8)",
        "answers": [
          "J8",
          "K8",
          "N6"
        ]
      },
      {
        "question": "How was team 1 sabotaged and which millionaire is behind it? (4/8)",
        "answers": [
          "O7",
          "N5"
        ]
      },
      {
        "question": "How was team 2 sabotaged and which millionaire is behind it? (5/8)",
        "answers": [
          "L8",
          "N7",
          "I5"
        ]
      },
      {
        "question": "How was team 3 sabotaged and which millionaire is behind it? (6/8)",
        "answers": [
          "M8",
          "P5"
        ]
      },
      {
        "question": "Why was the horse trainer willing to sabotage her own horse for money? (7/8)",
        "answers": [
          "J6"
        ]
      },
      {
        "question": "Who knew the outsider would win - and how? (8/8)",
        "answers": [
          "J8",
          "K8",
          "I5",
          "M7",
          "N5"
        ]
      }
    ],
    "I Know What You Did Last Saturday": [
      {
        "question": "Is there a suspect? (2/9)",
        "answers": [
          "K7",
          "N8",
          "O7"
        ]
      },
      {
        "question": "Do the three victims have a common interest? (3/9)",
        "answers": [
          "O7",
          "M8",
          "J8"
        ]
      },
      {
        "question": "Where did the victims play together the previous saturday? (4/9)",
        "answers": [
          "O6"
        ]
      },
      {
        "question": "In which three places did the friends celebrate their victory? (5/9)",
        "answers": [
          "N6",
          "K6",
          "L6"
        ]
      },
      {
        "question": "What happened on the way home? (6/9)",
        "answers": [
          "J5",
          "I5"
        ]
      },
      {
        "question": "What happened to the victim and where did the hook killer come from? (7/9)",
        "answers": [
          "I5",
          "I6"
        ]
      },
      {
        "question": "How did the hook killer know his victims? (8/9)",
        "answers": [
          "O6"
        ]
      },
      {
        "question": "Save the friend! Find her flat! (9/9)",
        "answers": [
          "O5"
        ]
      }
    ],
    "Murder In The Wimmersberg Villa": [
      {
        "question": "Find the villa! (2/12)",
        "answers": [
          "P7",
          "P8"
        ]
      },
      {
        "question": "What could have been the cause of death? (3/12)",
        "answers": [
          "P8"
        ]
      },
      {
        "question": "How many people were at the property? (4/12)",
        "answers": [
          "P7",
          "P8"
        ]
      },
      {
        "question": "Was there a fight in the villa before dinner? (5/12)",
        "answers": [
          "P8"
        ]
      },
      {
        "question": "What event did the Wimmersberg couple attend the night before? (6/12)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Where did the four of them go after the performance? (7/12)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Who did the couple meet on their way home? (8/12)",
        "answers": [
          "N7"
        ]
      },
      {
        "question": "Did the couple go home together? (9/12)",
        "answers": [
          "N7"
        ]
      },
      {
        "question": "What happened at the Richard's workplace? (10/12)",
        "answers": [
          "N5",
          "N6"
        ]
      },
      {
        "question": "Where was Richard before work? (11/12)",
        "answers": [
          "L5"
        ]
      },
      {
        "question": "Who is the murderer? (12/12)",
        "answers": [
          "K6",
          "O5"
        ]
      }
    ],
    "Pandemic": [
      {
        "question": "Who did the woman catch it from? (2/4)",
        "answers": [
          "L6",
          "M7"
        ]
      },
      {
        "question": "Follow the chain of contact and find up to 10 more infected people! Answer A1 as there is no coordinate for this one. (3/4)",
        "answers": [
          "A1"
        ]
      },
      {
        "question": "Where did the virus pass from the animal kingdom to humans? (4/4)",
        "answers": [
          "N8"
        ]
      }
    ],
    "Revenge Of The Small Guy": [
      {
        "question": "What was the victim knocked down with and who is a key suspect? (2/6)",
        "answers": [
          "O7",
          "O8"
        ]
      },
      {
        "question": "Where is the suspect now? (3/6)",
        "answers": [
          "O8"
        ]
      },
      {
        "question": "What mode of transport did the suspect use to get to the east of the city? (4/6)",
        "answers": [
          "P6"
        ]
      },
      {
        "question": "Where did the bus come from? (5/6)",
        "answers": [
          "J7"
        ]
      },
      {
        "question": "What is the perpetrator's motive? (6/6)",
        "answers": [
          "J6",
          "J7"
        ]
      }
    ],
    "Strawberry, Lemon, Chocolate": [
      {
        "question": "Search the villa for the reason why Heinrich is not happy! (2/7)",
        "answers": [
          "O8"
        ]
      },
      {
        "question": "Where was the painting acquired? (3/7)",
        "answers": [
          "J6"
        ]
      },
      {
        "question": "Where did the auction house get the painting? (4/7)",
        "answers": [
          "J8"
        ]
      },
      {
        "question": "Are there any inconsistencies in the household liquidation? (5/7)",
        "answers": [
          "J8"
        ]
      },
      {
        "question": "Where did the bearer of the parcel come from? (6/7)",
        "answers": [
          "O5"
        ]
      },
      {
        "question": "Where did the forget receive his payment? (7/7)",
        "answers": [
          "P5"
        ]
      }
    ],
    "The Blood-red Traffic Light": [
      {
        "question": "Find the scene of the incident! (2/7)",
        "answers": [
          "O8"
        ]
      },
      {
        "question": "What were all the things the victim did that day? Provide the first and last coordinates of his day. (3/7)",
        "answers": [
          "K6",
          "N7"
        ]
      },
      {
        "question": "What family trait might have gotten Kasimir into trouble? (4/7)",
        "answers": [
          "K7"
        ]
      },
      {
        "question": "Where were Kasimirs parents earlier? (5/7)",
        "answers": [
          "O6"
        ]
      },
      {
        "question": "What did the brother do beforehand? (6/7)",
        "answers": [
          "P5"
        ]
      },
      {
        "question": "Why was Kasimir pushed and where is the culprit now? (7/7)",
        "answers": [
          "N8"
        ]
      }
    ],
    "The Bobble Hat": [
      {
        "question": "Find Fernando at the doughnut shop! (2/5)",
        "answers": [
          "K8"
        ]
      },
      {
        "question": "Find Fernando at the hospital! (3/5)",
        "answers": [
          "K7"
        ]
      },
      {
        "question": "What happened in between? How did the hat get lost? (4/5)",
        "answers": [
          "K7"
        ]
      },
      {
        "question": "Where are the thieves sitting and what have they done with the hat? (5/5)",
        "answers": [
          "M7",
          "N7"
        ]
      }
    ],
    "The Courier": [
      {
        "question": "Find the furniture store! (2/8)",
        "answers": [
          "M5",
          "N5"
        ]
      },
      {
        "question": "What happened to the courier? (3/8)",
        "answers": [
          "N6"
        ]
      },
      {
        "question": "Who are the perpetrators and where did they flee to? (4/8)",
        "answers": [
          "N6",
          "O6",
          "O7"
        ]
      },
      {
        "question": "How did the perpetrators know about the money? (5/8)",
        "answers": [
          "K6"
        ]
      },
      {
        "question": "Who is the informant? (6/8)",
        "answers": [
          "K6"
        ]
      },
      {
        "question": "Why was there no money in the briefcase? (7/8)",
        "answers": [
          "M5"
        ]
      },
      {
        "question": "Where is the money and where is the courier? (8/8)",
        "answers": [
          "M5",
          "J8"
        ]
      }
    ],
    "The Dead Swan": [
      {
        "question": "Find the murder weapon! (2/8)",
        "answers": [
          "O5"
        ]
      },
      {
        "question": "Where did the victim work? (3/8)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Was there anything unusual about the performance? (4/8)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Where was the injured woman before the performance? (5/8)",
        "answers": [
          "K7"
        ]
      },
      {
        "question": "How did the injury happen? (6/8)",
        "answers": [
          "L5"
        ]
      },
      {
        "question": "What did Annika experience on her way home after the ballet performance? (7/8)",
        "answers": [
          "O7",
          "N7"
        ]
      },
      {
        "question": "Who is the killer and where is he now? (8/8)",
        "answers": [
          "N8",
          "O8",
          "P5"
        ]
      }
    ],
    "The Final Plunge": [
      {
        "question": "Was it an accident or was there more to it? (2/8)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Where was the mechanic hired to tamper with the car? (3/8)",
        "answers": [
          "M6"
        ]
      },
      {
        "question": "Who did the woman meet beforehand? (4/8)",
        "answers": [
          "N7"
        ]
      },
      {
        "question": "Where did Lola get the bag and who did she meet beforehand? (5/8)",
        "answers": [
          "M7",
          "K6"
        ]
      },
      {
        "question": "Where did the money for the tampering of the car come from? (6/8)",
        "answers": [
          "J6"
        ]
      },
      {
        "question": "Why did the three of them plan the murder? (7/8)",
        "answers": [
          "I7",
          "J8",
          "K7"
        ]
      },
      {
        "question": "Where are the three women now? (8/8)",
        "answers": [
          "I6"
        ]
      }
    ],
    "The Missing Son": [
      {
        "question": "Find the cafe! (2/10)",
        "answers": [
          "N6"
        ]
      },
      {
        "question": "Where did Jackie and Donnie meet and what did they do there? (3/10)",
        "answers": [
          "K5",
          "L6",
          "K6"
        ]
      },
      {
        "question": "What was Donnie doing before they met up? (4/10)",
        "answers": [
          "P6"
        ]
      },
      {
        "question": "What happened to the van? (5/10)",
        "answers": [
          "M8"
        ]
      },
      {
        "question": "Where did the motorbike gangsters take the van? (6/10)",
        "answers": [
          "I8"
        ]
      },
      {
        "question": "What happened to the motorbike gangsters? (7/10)",
        "answers": [
          "I7"
        ]
      },
      {
        "question": "Who were the motorbike gangsters that attacked the van? (8/10)",
        "answers": [
          "N7"
        ]
      },
      {
        "question": "Where were the killers hired? (9/10)",
        "answers": [
          "L7"
        ]
      },
      {
        "question": "Find the mafia boss' home! (10/10)",
        "answers": [
          "P7"
        ]
      }
    ],
    "The Prize Pumpkin": [
      {
        "question": "Find the site of the explosion! (2/9)",
        "answers": [
          "I6"
        ]
      },
      {
        "question": "Who detonated the bomb? (3/9)",
        "answers": [
          "I6"
        ]
      },
      {
        "question": "Which event could be the reason for the blast? (4/9)",
        "answers": [
          "I6"
        ]
      },
      {
        "question": "Did one of Herbie's two competitors set off the explosion? (5/9)",
        "answers": [
          "I6",
          "L7",
          "L6"
        ]
      },
      {
        "question": "Why have Herbie's pumpkins been so successful so far? (6/9)",
        "answers": [
          "M8"
        ]
      },
      {
        "question": "Did anyone know about Herbie's secret? (7/9)",
        "answers": [
          "J6",
          "M8"
        ]
      },
      {
        "question": "What angers Dr. Lizer so much about Herbie's Method? (8/9)",
        "answers": [
          "I6"
        ]
      },
      {
        "question": "What did Dr. Lizer do after his discovery? (9/9)",
        "answers": [
          "P6",
          "P7"
        ]
      }
    ],
    "The Thimblerigger": [
      {
        "question": "What trick did the swindler use to escape from police? (2/5)",
        "answers": [
          "M7",
          "N7"
        ]
      },
      {
        "question": "What are the duties of three other members of the gang and where are their headquarters? (3/5)",
        "answers": [
          "N5",
          "J7",
          "K7",
          "P5"
        ]
      },
      {
        "question": "At the depot: which bin is the swindler in? (4/5)",
        "answers": [
          "N8",
          "P7",
          "P5"
        ]
      },
      {
        "question": "At the depot: which bin has the money sack inside? (5/5)",
        "answers": [
          "K5",
          "J7"
        ]
      }
    ],
    "Tut-an-carmen": [
      {
        "question": "What happened at the exhibition? (2/8)",
        "answers": [
          "N6"
        ]
      },
      {
        "question": "Who delivered the sarcophagus? (3/8)",
        "answers": [
          "N6"
        ]
      },
      {
        "question": "What went wrong with the delivery from overseas? (4/8)",
        "answers": [
          "K5"
        ]
      },
      {
        "question": "Where did the two pull the sarcophagus out of the water? (5/8)",
        "answers": [
          "J5",
          "K6"
        ]
      },
      {
        "question": "What did the pair see on their escape from the city? (6/8)",
        "answers": [
          "M5",
          "N5"
        ]
      },
      {
        "question": "Where did the two of them get the replacement? (7/8)",
        "answers": [
          "I6",
          "J6"
        ]
      },
      {
        "question": "Where did the real mummy turn up? (8/8)",
        "answers": [
          "I5"
        ]
      }
    ],
    "Wild Catch": [
      {
        "question": "Where was the mother with her daughter earlier? (2/6)",
        "answers": [
          "K8"
        ]
      },
      {
        "question": "What happened to the other family members? (3/6)",
        "answers": [
          "K8"
        ]
      },
      {
        "question": "What caused the illness? (4/6)",
        "answers": [
          "K8"
        ]
      },
      {
        "question": "Where did the fish come from? (5/6)",
        "answers": [
          "K5"
        ]
      },
      {
        "question": "Why was the fish so toxic? (6/6)",
        "answers": [
          "P7"
        ]
      }
    ]
  }
}
        
document.addEventListener('DOMContentLoaded', function() {
    var modal = document.getElementById('modal');
    var helpLink = document.querySelector('.help-link a');
    var span = document.getElementsByClassName('close')[0];

    helpLink.onclick = function(e) {
        e.preventDefault();
        modal.style.display = 'block';
        modal.setAttribute('aria-hidden', 'false');
        span.focus(); // Focus on close button for accessibility
    }

    function closeModal() {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        helpLink.focus(); // Return focus to help link
    }

    span.onclick = closeModal;

    window.onclick = function(event) {
        if (event.target == modal) {
            closeModal();
        }
    }

    // Close modal on Escape key press
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && modal.style.display === 'block') {
            closeModal();
        }
    });
});


let currentQuestion = 0;
    const gameSelect = document.getElementById('game-select');
    const caseSelect = document.getElementById('case-select');
    const questionHeader = document.getElementById('question-header');
    const questionWrapper = document.querySelector('.question-wrapper');

    document.addEventListener('DOMContentLoaded', function () {
        populateGameSelect();
    });

    // Function to populate game-select based on answerData keys
    function populateGameSelect() {
        gameSelect.innerHTML = ''; // Clear existing options
        const games = Object.keys(answerData); // Get all game names (keys in answerData)

        games.forEach(game => {
            const option = document.createElement('option');
            option.value = game;
            option.textContent = game; // Use the game name as the option text
            gameSelect.appendChild(option);
        });

        // Automatically populate the first case for the first game
        if (games.length > 0) {
            gameSelect.value = games[0];
            populateCaseSelect();
        }
    }

    // Function to populate case-select based on the selected game
    function populateCaseSelect() {
        const selectedGame = gameSelect.value;
        const cases = Object.keys(answerData[selectedGame] || {});
        caseSelect.innerHTML = ''; // Clear existing options
        cases.forEach(caseName => {
            const option = document.createElement('option');
            option.value = caseName;
            option.textContent = caseName;
            caseSelect.appendChild(option);
        });
        resetQuiz(); // Update the question based on the first case
    }

    // Reset the quiz and update the first question
    function resetQuiz() {
        currentQuestion = 0;
        updateQuestion();
    }

    // Update the question header and wrapper based on the current game, case, and question
    function updateQuestion() {
        const selectedGame = gameSelect.value;
        const selectedCase = caseSelect.value;
        const questionData = answerData[selectedGame]?.[selectedCase]?.[currentQuestion] || {};
        questionHeader.innerText = `Question ${currentQuestion + 1}:`;
        questionWrapper.innerText = questionData.question;
        document.getElementById('coordinate-input').value = '';
        document.getElementById('result').innerText = '';
        document.getElementById('check-answer-btn').style.display = 'block';
        document.getElementById('skip-question').style.display = 'block';
        document.getElementById('see-answer').style.display = 'block';
        document.getElementById('next-question-btn').style.display = 'none';
        updateNavigationButtons();

        // Update helper text
        const expectedCoordinates = questionData.answers.length;
        const helperText = expectedCoordinates === 1 
            ? "Enter 1 coordinate" 
            : `Enter ${expectedCoordinates} coordinates separated by commas`;
        document.getElementById('coordinate-helper').textContent = helperText;
    }

    // Function to clean and standardize user input
    function cleanInput(input) {
        return input
            .toUpperCase() // Convert to uppercase
            .replace(/[^A-Z0-9,]/g, '') // Remove unexpected characters (keep letters, numbers, and commas)
            .split(',') // Split input by commas
            .map(answer => answer.trim()) // Trim each answer
            .filter(answer => answer !== ""); // Remove empty answers
    }

    // Function to check if two arrays contain the same elements (ignoring order)
    function arraysEqual(arr1, arr2) {
        if (arr1.length !== arr2.length) return false;
        const sorted1 = arr1.slice().sort();
        const sorted2 = arr2.slice().sort();
        return sorted1.every((value, index) => value === sorted2[index]);
    }

    // Function to check the answer
    document.getElementById('check-answer-btn').addEventListener('click', function () {
        const userInput = cleanInput(document.getElementById('coordinate-input').value);
        const correctAnswers = answerData[gameSelect.value][caseSelect.value][currentQuestion].answers;

        if (arraysEqual(userInput, correctAnswers)) {
            document.getElementById('result').innerText = "Correct!";
            document.getElementById('result').style.color = "green";
            document.getElementById('check-answer-btn').style.display = "none";
            document.getElementById('skip-question').style.display = "none";
            document.getElementById('see-answer').style.display = "none";
            document.getElementById('next-question-btn').style.display = "block";
        } else {
            document.getElementById('result').innerText = "Incorrect, try again!";
            document.getElementById('result').style.color = "red";
        }
    });

    // Function to move to the next question
    document.getElementById('next-question-btn').addEventListener('click', function () {
        moveToNextQuestion();
    });

    // Function to skip to the next question
    document.getElementById('skip-question').addEventListener('click', function () {
        moveToNextQuestion();
    });

    // Function to show the correct answer(s)
    document.getElementById('see-answer').addEventListener('click', function () {
        const correctAnswers = answerData[gameSelect.value][caseSelect.value][currentQuestion].answers.join(', ');
        document.getElementById('result').innerText = `Answer: ${correctAnswers}`;
        document.getElementById('result').style.color = "rgb(29, 29, 27)";
        document.getElementById('result').style.fontFamily = "'Barlow', sans-serif";
    });

    // Function to go back to the previous question
    document.getElementById('previous-question').addEventListener('click', function () {
        if (currentQuestion > 0) {
            currentQuestion--;
            updateQuestion();
        }
    });

    function moveToNextQuestion() {
        currentQuestion++;
        const selectedGame = gameSelect.value;
        const selectedCase = caseSelect.value;
        if (currentQuestion < answerData[selectedGame][selectedCase].length) {
            updateQuestion();
        } else {
            document.getElementById('question-header').innerText = "";
            document.querySelector('.question-wrapper').innerHTML =
                `<div id="completion-message">Congratulations, you've solved the case!<br>Select a new case to continue the fun!</div>`;
            document.getElementById('coordinate-input').style.display = "none";
            document.getElementById('check-answer-btn').style.display = "none";
            document.getElementById('see-answer').style.display = "none";
            document.getElementById('skip-question').style.display = "none";
            document.getElementById('next-question-btn').style.display = "none";
            document.getElementById('previous-question').style.display = "block";
        }
    }

    function updateNavigationButtons() {
        // Show or hide the "Back to Previous Question" link
        if (currentQuestion > 0) {
            document.getElementById('previous-question').style.display = 'block';
        } else {
            document.getElementById('previous-question').style.display = 'none';
        }
    }

    // Event listeners to handle changes in game or case selection
    gameSelect.addEventListener('change', populateCaseSelect);
    caseSelect.addEventListener('change', resetQuiz);

    // Initial population of game and case selects
    populateGameSelect();
    </script>

<!-- Footer -->
<div class="bottom-bar">
    <div class="bottom-bar-content">
        <div class="help-link">
            <a href="#"><span class="help-icon"></span> Help</a>
        </div>
        <div class="disclaimer">
            Fan site not affiliated with <a href="https://micromacro-game.com/" target="_blank" class="game-link">Micro Macro</a>.
        </div>        
        <div class="buy-link">
            <a href="https://pegashort.io/Buy-MicroMacro" target="_blank">
                Buy the Games
            </a>
        </div>
    </div>
</div>


    
    
</body>

<div id="modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modal-title">
    <div class="modal-content">
        <span class="close" aria-label="Close">&times;</span>
        <div id="modal-body">
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeFQ3XlhrwlgQIj-uZO7VJ0LU-eKfVXAGbfyyvQgYXyObmOZQ/viewform?embedded=true" width="100%" height="515" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>
        </div>
    </div>
</div>

</html>
